

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1. Issues &mdash; Docsync.jserv 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=2882ecd3"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="2. Closed Issues" href="issues-closed.html" />
    <link rel="prev" title="Welcome to Docsync.jserv!" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Docsync.jserv
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">1. Issues</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#tireless-doc-ref-resolving">1.1. Tireless Doc-ref Resolving</a></li>
<li class="toctree-l2"><a class="reference internal" href="#to-be-refined-resolving-doc-ref">1.2. To be refined: resolving Doc-ref</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#fixem-todo">1.2.1. FIXEM TODO!!!</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#setup-jservs-at-installation">1.3. Setup <em>jservs</em> at installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#only-one-syn-worker-thread">1.4. Only one syn-worker thread</a></li>
<li class="toctree-l2"><a class="reference internal" href="#overhaul-sending-exception-to-client">1.5. Overhaul: sending exception to client</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-long-will-the-syn-worker-can-work-without-clean-buffered-data">1.6. How long will the syn-worker can work without clean buffered data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#android-preferenceedit-saves-violate-oop-encapsulation-principle">1.7. Android PreferenceEdit Saves Violate OOP Encapsulation Principle</a></li>
<li class="toctree-l2"><a class="reference internal" href="#different-filesystem-providers-of-jdk-1-8-windows-android">1.8. Different FileSystem Providers of JDK 1.8, Windows &amp; Android</a></li>
<li class="toctree-l2"><a class="reference internal" href="#should-forcing-radix-32-for-syn-uids">1.9. Should forcing Radix-32 for syn-uids?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#file-block-chain-vs-docref-stream">1.10. File Block Chain vs. DocRef Stream</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="issues-closed.html">2. Closed Issues</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Docsync.jserv</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">1. </span>Issues</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="issues">
<h1><span class="section-number">1. </span>Issues<a class="headerlink" href="#issues" title="Link to this heading"></a></h1>
<section id="tireless-doc-ref-resolving">
<h2><span class="section-number">1.1. </span>Tireless Doc-ref Resolving<a class="headerlink" href="#tireless-doc-ref-resolving" title="Link to this heading"></a></h2>
<p>There are reasons, reasonable reasons, that docs be referenced at target synodes
are not reachable, resulting SessionPeer.update2peer() -&gt; resolveRef206Stream()
keeps failing, which will start again and again as long as the syn_docref is not
empty.</p>
<p>What’s the reasonable policy to avoid keep printing errors while it’s not a
solution if stop trying again anymore?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>If a max trying limit is used, when to reset the tried times counter?
</pre></div>
</div>
</section>
<section id="to-be-refined-resolving-doc-ref">
<h2><span class="section-number">1.2. </span>To be refined: resolving Doc-ref<a class="headerlink" href="#to-be-refined-resolving-doc-ref" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Jun</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">2025</span>
</pre></div>
</div>
<p>The concept of passive mode is introduced, and the schema for resolving pushed doc-ref
at passive nodes, e.g. X29, must be resolved by the pushing clients, e.g. Y20, since a
passive node dees not necessarily know the actual jserv of the pushing clients.</p>
<p>Currently there are 2 strategies for these passive doc-ref’s resolving:</p>
<ol class="lowerroman simple">
<li><p>the client remember its tasks while select <em>refile</em> when pushing; (can be duplicate)</p></li>
<li><p>the client query saved doc-refs at a server to finish its tasks. (already persisted)</p></li>
</ol>
<p>Decision 2025-06-30: the second one looks like more error tolerating and simpler.</p>
<section id="fixem-todo">
<h3><span class="section-number">1.2.1. </span>FIXEM TODO!!!<a class="headerlink" href="#fixem-todo" title="Link to this heading"></a></h3>
<p>The resolving process, block by block, must check something to make sure the ext-file
is not modified. Somethin like a timestamp is enought. Once it is changed, reset the
doc-ref’s breakpoint to 0. Any ext-file entity updating will clear the corresponding
doc-ref records.</p>
</section>
</section>
<section id="setup-jservs-at-installation">
<h2><span class="section-number">1.3. </span>Setup <em>jservs</em> at installation<a class="headerlink" href="#setup-jservs-at-installation" title="Link to this heading"></a></h2>
<p>When the application server is installed, it should know peer jservs, otherwise
the nyq vector matrix won’t work.</p>
<p>If a synode is passive (hub-node, e.g. X29), it still need all nodes’ ID in settings.jservs,
except the syn_nodes.jserv is never used.</p>
<p><strong>Update 2025-06-27</strong></p>
<p>comments on da2330dae3e085860d637b0e6c077e3cf6992667:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1.</span> <span class="n">Winsrv</span> <span class="n">cannot</span> <span class="n">update</span> <span class="n">local</span> <span class="n">Ip</span> <span class="k">if</span> <span class="n">changed</span> <span class="n">Wifi</span> <span class="n">settings</span>
<span class="p">(</span><span class="n">reboot</span> <span class="n">works</span><span class="p">,</span> <span class="n">but</span> <span class="n">won</span><span class="s1">&#39;t work if booting while wifi is disabled)</span>
</pre></div>
</div>
<p>This issue should be considered as a requirements to registration infrastructure.</p>
</section>
<section id="only-one-syn-worker-thread">
<h2><span class="section-number">1.4. </span>Only one syn-worker thread<a class="headerlink" href="#only-one-syn-worker-thread" title="Link to this heading"></a></h2>
<p>Multiple synodes cannot work in one (test) running.</p>
<p>commit: 2079991c2cfda1a46ac532b94ebb836e41590377</p>
<p>See ExpSynodetier.syncIns().</p>
</section>
<section id="overhaul-sending-exception-to-client">
<h2><span class="section-number">1.5. </span>Overhaul: sending exception to client<a class="headerlink" href="#overhaul-sending-exception-to-client" title="Link to this heading"></a></h2>
<p>Re-design ServPort.err(MsgCode code, Exceptiion e);</p>
</section>
<section id="how-long-will-the-syn-worker-can-work-without-clean-buffered-data">
<h2><span class="section-number">1.6. </span>How long will the syn-worker can work without clean buffered data<a class="headerlink" href="#how-long-will-the-syn-worker-can-work-without-clean-buffered-data" title="Link to this heading"></a></h2>
<p>The maximum distance between stamps in syn-change and synode’s stamp is half of
Nyquence range, Long.MAX_VALUE, 2 ^ 63 -1 in Java. Each time the stamp will be
increased by 1 for a syn-workers looping. The longest buffering is the difference
of the earliest buffered change logs and the latest stamp.</p>
<p>If each interval is one second, a year has 3.15 * 10 ^ 7 seconds, the longest time
can be correctly buffered is approx. 300 billion years.</p>
</section>
<section id="android-preferenceedit-saves-violate-oop-encapsulation-principle">
<h2><span class="section-number">1.7. </span>Android PreferenceEdit Saves Violate OOP Encapsulation Principle<a class="headerlink" href="#android-preferenceedit-saves-violate-oop-encapsulation-principle" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CompileSDK</span> <span class="mi">34</span>
<span class="n">TargetSDK</span> <span class="mi">34</span>
<span class="n">Virtual</span> <span class="n">Device</span><span class="p">:</span> <span class="n">Pixel</span> <span class="mi">2</span> <span class="n">API</span> <span class="mi">26</span>
<span class="n">Tue</span> <span class="mi">07</span> <span class="n">Jan</span> <span class="mi">2025</span>
</pre></div>
</div>
<p>When modified PreferenceEdit, the changes are saved to the xml storage after user’s
confirmation. To discard the dirty changes next time, the initial value must be reloaded,
which is already lost.</p>
<a class="reference internal image-reference" href="_images/00-android-prefs-edit.png"><img alt="_images/00-android-prefs-edit.png" src="_images/00-android-prefs-edit.png" style="height: 5em;" />
</a>
<a class="reference internal image-reference" href="_images/00-android-prefs-saving.jpg"><img alt="_images/00-android-prefs-saving.jpg" src="_images/00-android-prefs-saving.jpg" style="height: 5em;" />
</a>
<p>Current solution: use an Anson object to by pass the behavior and only save as needed.</p>
</section>
<section id="different-filesystem-providers-of-jdk-1-8-windows-android">
<h2><span class="section-number">1.8. </span>Different FileSystem Providers of JDK 1.8, Windows &amp; Android<a class="headerlink" href="#different-filesystem-providers-of-jdk-1-8-windows-android" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Jan</span> <span class="mi">05</span><span class="p">,</span> <span class="mi">2025</span>
<span class="n">Semantic</span><span class="o">.</span><span class="n">DA</span> <span class="mf">1.5.13</span>
</pre></div>
</div>
<p>Loading text file for jar requires a zip file system provider. This is implemented differently
in JDK 1.8 (Semantic.DA dependency) and Android environment.</p>
<p>At least API 26, the Zip file system provider is
<a class="reference external" href="https://issuetracker.google.com/issues/153773248?pli=1">not available on Android</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Response</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">engineering</span> <span class="n">team</span><span class="p">:</span>
<span class="o">=================================</span>

<span class="n">The</span> <span class="n">missing</span> <span class="n">implementation</span> <span class="ow">is</span> <span class="n">com</span><span class="o">.</span><span class="n">sun</span><span class="o">.</span><span class="n">nio</span><span class="o">.</span><span class="n">zipfs</span><span class="o">.</span><span class="n">ZipFileSystemProvider</span><span class="p">,</span> <span class="n">which</span>
<span class="ow">is</span> <span class="ow">not</span> <span class="n">available</span> <span class="n">on</span> <span class="n">Android</span><span class="o">.</span> <span class="n">We</span> <span class="n">recommend</span> <span class="n">using</span> <span class="n">ZipInputStream</span><span class="p">,</span> <span class="n">which</span> <span class="ow">is</span> <span class="ow">not</span>
<span class="n">a</span> <span class="n">replacement</span> <span class="n">but</span> <span class="n">can</span> <span class="n">be</span> <span class="n">used</span> <span class="n">to</span> <span class="n">achieve</span> <span class="n">similar</span> <span class="n">functionality</span><span class="o">.</span>
</pre></div>
</div>
<p>Current fixing for loading files from jar package:</p>
<p>TODO Add Tests 2025-01-25 (Antson 0.9.113):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1.</span> <span class="n">In</span> <span class="n">deployed</span> <span class="n">server</span> <span class="n">side</span> <span class="p">(</span><span class="n">Windows</span><span class="p">),</span> <span class="n">separatlly</span> <span class="n">load</span> <span class="nb">zip</span> <span class="n">file</span> <span class="n">within</span> <span class="n">another</span> <span class="n">branch</span><span class="o">.</span>
<span class="mf">2.</span> <span class="n">In</span> <span class="n">Android</span><span class="p">,</span> <span class="n">avoid</span> <span class="n">loading</span> <span class="nb">zip</span> <span class="n">file</span><span class="o">.</span>
</pre></div>
</div>
<p>References</p>
<ol class="arabic">
<li><p>Answer by Google AI of search results of “java proper path string format for jdk.zipfs.ZipFileSystem”</p>
<blockquote>
<div><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.IOException</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.io.InputStream</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.nio.file.*</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.HashMap</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ZipFileExample</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">zipFilePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/path/to/your/zipfile.zip&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">entryPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;path/to/file/inside/zip.txt&quot;</span><span class="p">;</span>

<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="n">FileSystem</span><span class="w"> </span><span class="n">zipfs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FileSystems</span><span class="p">.</span><span class="na">newFileSystem</span><span class="p">(</span><span class="n">Paths</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">zipFilePath</span><span class="p">),</span><span class="w"> </span><span class="kc">null</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Path</span><span class="w"> </span><span class="n">pathInZip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">zipfs</span><span class="p">.</span><span class="na">getPath</span><span class="p">(</span><span class="n">entryPath</span><span class="p">);</span>

<span class="w">            </span><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="n">InputStream</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Files</span><span class="p">.</span><span class="na">newInputStream</span><span class="p">(</span><span class="n">pathInZip</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="c1">// Process the InputStream</span>
<span class="w">                </span><span class="c1">// ...</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<p>#. Java Documentation, <a class="reference external" href="https://docs.oracle.com/javase/8/docs/technotes/guides/io/fsp/zipfilesystemprovider.html">Zip File System Provider</a>,
Java SE 8 Documentation, Oracle.</p>
<p>#. by Qusay H. Mahmoud, <a class="reference external" href="https://web.archive.org/web/20110427091148/http://java.sun.com/developer/technicalArticles/Programming/compression/">Compressing and Decompressing Data Using Java APIs</a>,
with contributions from Konstantin Kladko, February 2002,
SDN Home / Java Technology / Reference / Technical Articles and Tips
retrieved on 2025-01-25.</p>
<p>TODO To be edit (replace with loadTxt()):</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">protected</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">loadSqlite</span><span class="p">(</span><span class="n">Class</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">clzz</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">filename</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// https://stackoverflow.com/a/46468788/7362888</span>
<span class="w">        </span><span class="c1">// URI uri = Paths.get(clzz.getResource(filename).toURI()).toUri();</span>
<span class="w">        </span><span class="n">URI</span><span class="w"> </span><span class="n">uri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clzz</span><span class="p">.</span><span class="na">getResource</span><span class="p">(</span><span class="n">filename</span><span class="p">).</span><span class="na">toURI</span><span class="p">();</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="o">!</span><span class="n">eq</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="na">getScheme</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;file&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">            </span><span class="n">zipfs</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span>
<span class="w">            </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">env</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="w">                </span><span class="n">env</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;create&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="p">);</span>
<span class="w">                </span><span class="n">zipfs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FileSystems</span><span class="p">.</span><span class="na">newFileSystem</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span><span class="w"> </span><span class="n">env</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">Utils</span><span class="p">.</span><span class="na">warnT</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="p">()</span><span class="w"> </span><span class="p">{},</span>
<span class="w">                    </span><span class="s">&quot;File %s shouldn&#39;t be load in the runtime environment.\ntarget URI: %s&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="n">uri</span><span class="p">);</span>
<span class="w">                </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">        </span><span class="n">uri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Paths</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">uri</span><span class="p">).</span><span class="na">toUri</span><span class="p">();</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Files</span><span class="p">.</span><span class="na">readAllLines</span><span class="p">(</span>
<span class="w">            </span><span class="n">Paths</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">uri</span><span class="p">),</span><span class="w"> </span><span class="n">Charset</span><span class="p">.</span><span class="na">defaultCharset</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">joining</span><span class="p">(</span><span class="s">&quot;\n&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Utils</span><span class="p">.</span><span class="na">warnT</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Object</span><span class="p">()</span><span class="w"> </span><span class="p">{},</span>
<span class="w">            </span><span class="s">&quot;File %s can&#39;t be loaded in the runtime environment.\n%s&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
<span class="w">        </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="should-forcing-radix-32-for-syn-uids">
<h2><span class="section-number">1.9. </span>Should forcing Radix-32 for syn-uids?<a class="headerlink" href="#should-forcing-radix-32-for-syn-uids" title="Link to this heading"></a></h2>
<p>To be verified:</p>
<p>Auto-key will generate Radix 64 number in Linux automatically for syn-uids,
which is used as file name prefix and shouldn’t be confused across different
platforms.</p>
</section>
<section id="file-block-chain-vs-docref-stream">
<h2><span class="section-number">1.10. </span>File Block Chain vs. DocRef Stream<a class="headerlink" href="#file-block-chain-vs-docref-stream" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">May</span> <span class="mi">26</span> <span class="mi">2025</span>
</pre></div>
</div>
<p>File block chain works will in Portolio 0.7.2 (Semantic.jserv 1.5.16,
Semantic.DA 1.5.18), but the cons are using a lot of memory at server
side, as all blocks are buffered and updated to database, by semantics
<em>extfile</em>. Base 64 file content is committed like a database field. the
intended function, resume at breakpoint, is not implemented.</p>
<p>In May 2025, a new semantics, the DocRef stream, without database semantics
handler, only has Funcalls, is introduced to asynchronously upload file content
and synchronize files. SynssionClient and SynssionServ use this schema for
synchronize files asynchronously.</p>
<p>The pushBlock() schema is planned to replace stream uploading in the future
for breakpoint resumming.</p>
<p>If this object is the reply to client’s Doclientier.pushBlock(), clients
can simultaneously upload files in streams mode.</p>
<p>DocRef Stream is used to resolve file reference, while file’s json block chains
are used to transfere data. The only possible confliction is extfilev2 triggering
by semantics.DA handler and the DocRef is resolving by a Synode. Since Semantic.DA
1.5.18, ShExtFilev2, the handler, will ignore the field is the content is starting
with an envelope’s beginning data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>\<span class="n">s</span><span class="o">*</span><span class="s2">&quot;type&quot;</span><span class="p">:</span>
</pre></div>
</div>
<p>The Base64 string cannot has such characters like the curely brace ({), double
quotes (”) or colon (:).</p>
<p><strong>TO DO to be verified</strong></p>
<p>Currently there is nyquence tag implemented in DocRef. Resources can be conflict if
asynchronously downloading the file, at least will download multiple time in an
orthogonal data schema. This is to be optmized if it’s a serious problem in Portfolio.</p>
<p>Reference</p>
<p>[1] Grok Answer: A Java client for uploading files that can resumming at breakpoints,</p>
<blockquote>
<div><p>which is actually the block based style.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="n">RandomAccessFile</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RandomAccessFile</span><span class="p">(</span><span class="n">localFilePath</span><span class="p">.</span><span class="na">toFile</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;r&quot;</span><span class="p">);</span>
<span class="w">     </span><span class="n">OutputStream</span><span class="w"> </span><span class="n">outputStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connection</span><span class="p">.</span><span class="na">getOutputStream</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="n">file</span><span class="p">.</span><span class="na">seek</span><span class="p">(</span><span class="n">startByte</span><span class="p">);</span>
<span class="w">    </span><span class="kt">byte</span><span class="o">[]</span><span class="w"> </span><span class="n">buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">byte</span><span class="o">[</span><span class="n">BUFFER_SIZE</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">bytesRead</span><span class="p">;</span>

<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="n">bytesRead</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="p">.</span><span class="na">read</span><span class="p">(</span><span class="n">buffer</span><span class="p">))</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">outputStream</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">bytesRead</span><span class="p">);</span>
<span class="w">        </span><span class="n">bytesSent</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">bytesRead</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// Save progress</span>
<span class="w">        </span><span class="n">Files</span><span class="p">.</span><span class="na">writeString</span><span class="p">(</span><span class="n">progressFile</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">bytesSent</span><span class="p">),</span>
<span class="w">                </span><span class="n">StandardOpenOption</span><span class="p">.</span><span class="na">CREATE</span><span class="p">,</span><span class="w"> </span><span class="n">StandardOpenOption</span><span class="p">.</span><span class="na">WRITE</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Report progress</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">progressCallback</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">progressCallback</span><span class="p">.</span><span class="na">onProgress</span><span class="p">(</span><span class="n">bytesSent</span><span class="p">,</span><span class="w"> </span><span class="n">totalSize</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">outputStream</span><span class="p">.</span><span class="na">flush</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Conclusion (decision?): To optimize memory usage at the server side, no need to find better
algorithm other than write a temporary file.</p>
</div></blockquote>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to Docsync.jserv!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="issues-closed.html" class="btn btn-neutral float-right" title="2. Closed Issues" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Ody Zhou.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>