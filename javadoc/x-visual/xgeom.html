<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: xgeom</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
    <link rel="shortcut icon" href="../../css/item.png"/>
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: xgeom</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>xgeom<span class="signature">()</span><span class="type-signature"></span></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    
    <h4 class="name" id="xgeom"><span class="type-signature"></span>new xgeom<span class="signature">()</span><span class="type-signature"></span></h4>
    

    















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_xmath_geom.js.html">lib/xmath/geom.js</a>, <a href="lib_xmath_geom.js.html#line15">line 15</a>
    </li></ul></dd>
    

    

    

    
</dl>




















    
    </div>

    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id=".generateDirTube"><span class="type-signature">(static) </span>generateDirTube<span class="type-signature"></span></h4>




<div class="description">
    <p>Create a <code>DirTubeBufferGeometry</code> for rendering and tweening.</p>
<p>The vertices should include attributes of 'a_tan', and uniform 'wpos', the
world pos can by tweend as <a href="XComponent.html#.AnimType"><code>XComponent.AnimType</code></a>.U_PATH_MORPH.</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_xmath_geom.js.html">lib/xmath/geom.js</a>, <a href="lib_xmath_geom.js.html#line121">line 121</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id=".xzAngle"><span class="type-signature">(static) </span>xzAngle<span class="type-signature"></span></h4>




<div class="description">
    <p>return |atan(vec0[2], vec0[0]) - atan(vec1[2], vec[0])|</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_xmath_geom.js.html">lib/xmath/geom.js</a>, <a href="lib_xmath_geom.js.html#line314">line 314</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id=".catmullRom"><span class="type-signature">(static) </span>catmullRom<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Doc:
<a href='https://threejs.org/docs/#api/en/extras/core/Curve.getPoint'>
Returns a vector for a given position on the curve</a>.</p>
<p>Stolen from:
https://github.com/mrdoob/three.js/blob/b11f897812a8a48bcd81e9bd46785d07939ec59e/src/extras/core/Interpolations.js#L8</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    
    <dt class="tag-author">Author:</dt>
    <dd class="tag-author">
        <ul>
            <li>zz85 / http://www.lab4games.net/zz85/blog

Bezier Curves formulas obtained from
http://en.wikipedia.org/wiki/Bézier_curve</li>
        </ul>
    </dd>
    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_xmath_geom.js.html">lib/xmath/geom.js</a>, <a href="lib_xmath_geom.js.html#line488">line 488</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id=".checkLineIntersection"><span class="type-signature">(static) </span>checkLineIntersection<span class="signature">(x1, y1, x2, y2, x3, y3, x4, y4)</span><span class="type-signature"> &rarr; {object}</span></h4>
    

    



<div class="description">
    <p>Find 2d line intersection<br>
Line1: [(x1, y1), (x2, y2)]<br>
Line2: [(x3, y3), (x4, y4)]<br>
Reference:
<a href='http://jsfiddle.net/justin_c_rounds/Gd2S2/'>
justin_c_rounds's Calculating the intersection of two lines</a> &amp;
<a href='https://mathjs.org/docs/reference/functions/intersect.html'>
Math.js 3D version</a></p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x1</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>y1</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>x2</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>y2</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>x3</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>y3</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>x4</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>y4</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_xmath_geom.js.html">lib/xmath/geom.js</a>, <a href="lib_xmath_geom.js.html#line334">line 334</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>{x: number | null, y: number | null, onL1: bool, onL2: bool}</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".formatPrismOption"><span class="type-signature">(static) </span>formatPrismOption<span class="signature">(obj3, vparas)</span><span class="type-signature"> &rarr; {object}</span></h4>
    

    



<div class="description">
    <p>get prism paras from Visual.paras</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>obj3</code></td>
            

            <td class="type">
            
                
<span class="param-type">Obj3</span>


            
            </td>

            

            

            <td class="description last">
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>filter</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>the feature area filter. If set, feature.properties
must has an 'area' property equal to this. see <a href="AssetKeepr.html#.geoTexturePrism"><code>AssetKeepr.geoTexturePrism</code></a></p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>vparas</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>Visual.paras</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>maxVerts,</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>only works in synchrodous mode</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>coutn</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    100
                
                </td>
            

            <td class="description last"><p>features</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>tile</code></td>
            

            <td class="type">
            
                
<span class="param-type">array</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    [1, 1]
                
                </td>
            

            <td class="description last"><p>tiles</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>geoScale</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    1
                
                </td>
            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>origin</code></td>
            

            <td class="type">
            
                
<span class="param-type">array</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    [0, 0]
                
                </td>
            

            <td class="description last"><p>geo-center</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>onFeature</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>callback on each features</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>geostyle.onGroup</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>callback on each group</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_xmath_geom.js.html">lib/xmath/geom.js</a>, <a href="lib_xmath_geom.js.html#line510">line 510</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>potions form prism generating</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".generateCurve"><span class="type-signature">(static) </span>generateCurve<span class="signature">(cmpObj3, paras)</span><span class="type-signature"> &rarr; {object}</span></h4>
    

    



<div class="description">
    <p>Generate curve</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>cmpObj3</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>Obj3</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>paras</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>e.g. Visual.paras
paras.curve <code>CurveType</code><pre>
paras.segments: only for CurveType.randomCurve, | randomSegament generated curve segments
paras.range: only for CurveType.randomCurve | randomSegament, generated range, default 400
paras.points array of point, point = [nubmer, number, number]</pre></p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_xmath_geom.js.html">lib/xmath/geom.js</a>, <a href="lib_xmath_geom.js.html#line18">line 18</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>{curve, points}, where geomCurve is THREE.BufferGeometry,
points is the THREE.Vector3 array</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".generateWayxz"><span class="type-signature">(static) </span>generateWayxz<span class="signature">(paths, y0, origin, style, angleEpsilon<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {object}</span></h4>
    

    



<div class="description">
    <p id='generateWayxz'>Generate a x-z plane road polygon alone paths.</p>
Generated road model is applied with geostyle.scale, default 1. So if the
referencing path is scaled, the wpos/wtan for shader to animate also been
scaled.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>paths</code></td>
            

            <td class="type">
            
                
<span class="param-type">array</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>array of geojson features.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>y0</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>y for all vertices</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>origin</code></td>
            

            <td class="type">
            
                
<span class="param-type">array</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>[x, y, z]</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>style</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>{halfWidth: number, scale: number}</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>angleEpsilon</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    0.2
                
                </td>
            

            <td class="description last"><p>minimum angle to be taken as a stright segament.</p>
<ul>
<li>using second point as intersecting point to avoid error (precision problem?)</li>
</ul></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_xmath_geom.js.html">lib/xmath/geom.js</a>, <a href="lib_xmath_geom.js.html#line144">line 144</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>{geom: geometry, path: {points: Float32Array}}</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".getPointAt"><span class="type-signature">(static) </span>getPointAt<span class="signature">(pointBuffer, path, t)</span><span class="type-signature"> &rarr; {THREE.Vector3}</span></h4>
    

    



<div class="description">
    <p>Get point alone path, at weight t, and set result point in buffer.</p>
<p>Stolen from SplineCurve.prototype.getPoint</p>
<p>https://github.com/mrdoob/three.js/blob/master/src/extras/curves/SplineCurve.js</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>pointBuffer</code></td>
            

            <td class="type">
            
                
<span class="param-type">THREE.Vector3</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>path</code></td>
            

            <td class="type">
            
                
<span class="param-type">array.&lt;THREE.Vector3></span>


            
            </td>

            

            

            <td class="description last"><p>point array of THREE.Vector3</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>t</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>weight, range 0 - 1</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_xmath_geom.js.html">lib/xmath/geom.js</a>, <a href="lib_xmath_geom.js.html#line396">line 396</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>point</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">THREE.Vector3</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".getWayPointAt"><span class="type-signature">(static) </span>getWayPointAt<span class="signature">(pointBuffer, dirBuffer<span class="signature-attributes">opt</span>, points32, t)</span><span class="type-signature"> &rarr; {object.&lt;{point: THREE.Vector3, tan: THREE.Vecotor3}>}</span></h4>
    

    



<div class="description">
    <p>Get point alone path, where path is a Float32Array array.
The method ignored different distance between way points</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>pointBuffer</code></td>
            

            <td class="type">
            
                
<span class="param-type">THREE.Vector3</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>dirBuffer</code></td>
            

            <td class="type">
            
                
<span class="param-type">THREE.Vector3</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>points32</code></td>
            

            <td class="type">
            
                
<span class="param-type">array.&lt;Float32Array></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>point array of path</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>t</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>weight, range 0 - 1</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_xmath_geom.js.html">lib/xmath/geom.js</a>, <a href="lib_xmath_geom.js.html#line437">line 437</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>{point, tan}</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object.&lt;{point: THREE.Vector3, tan: THREE.Vecotor3}></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".hexaprism3857"><span class="type-signature">(static) </span>hexaprism3857<span class="signature">(cell, geoCentre, tile0, ctx)</span><span class="type-signature"> &rarr; {object}</span></h4>
    

    



<div class="description">
    <p id='hexaprism3857'>Generate a tile of hexagon volume. All coordinates
are in world. This method is usually been used via <a href="AssetKeepr.html#.geoHexaprism"><code>AssetKeepr.geoHexaprism</code></a>
in synchronous way or <a href="AssetKeepr.html#.geoHexaprismAsync"><code>AssetKeepr.geoHexaprismAsync</code></a> asynchronously</p>
The hexagon center = (cell - geoCentre) * scale, with height ignoring scale,
and world z is reversed, z = - (cell.y - geoCentre.y)
<p>This function is supposed to be called by a geojson stream handler, providing
reversed +z direction.</p>
<p>Reference:<br>
<a href='https://www.mathworks.com/matlabcentral/answers/89665-generating-an-array-of-hexagonal-shape-pattern'>
mathworks: Generating an Array of Hexagonal Shape Pattern</a><br>
<a href='https://stackoverflow.com/questions/30492299/shared-vertex-indices-with-normals-in-opengl'>
Best way of sharing vertices: flat</a><br>
<a href='https://stackoverflow.com/questions/40101023/flat-shading-in-webgl'>
walk around of sharing vertics in webgl 1.0: flat shading in webGL</a><br>
<a href='https://stackoverflow.com/questions/47957676/webgl-flat-shading'>
shareing vertices normals is hard in webgl 1.0: WebGL Flat Shading</a><br>
<a href='https://github.com/mrdoob/three.js/blob/25d16a2c3c54befcb3916dbe756e051984c532a8/src/geometries/CylinderGeometry.js#L198'>
Three.js cylinder way: CylinderGeometry#generateCap()</a><br>
<a href='http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-9-vbo-indexing/'>
reading: OpenGl Tutorial - VBO Indexing</a><br>
<a href='https://threejsfundamentals.org/threejs/lessons/threejs-custom-buffergeometry.html'>
Three.js Custom BufferGeometry, Three.js Fundamentals</a><br></p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>cell</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>information of cell geometry to be created
cell.coord: [x, y] - 2d position, in epsg 3857 ( +y pointing -z in x world)
cell.height: number - default 1
cell.geoscale: number - default 1, y scale ignored (always 1).</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>geoCentre</code></td>
            

            <td class="type">
            
                
<span class="param-type">array</span>


            
            </td>

            

            

            <td class="description last"><p>2d position, in epsg 3857, for the scene center</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>tile0</code></td>
            

            <td class="type">
            
                
<span class="param-type">array</span>


            
            </td>

            

            

            <td class="description last"><p>2d array of model position of 6 hexagon vertices,
in three.js world, typically got with <a href="xgeom.html#.hexatile"><code>xgeom.hexatile</code></a></p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>ctx</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>context of stream data processing<pre>
pos: Float32Array(verts * 3);
loc: Float32Array(verts * 3);
uvs: Float32Array(verts * 2);
normals: Float32Array(verts * 3);
dirs: Float32Array(verts * 3); attribute a_tan,
where a_tan[1] = onGroup(), (a_tan[0, 1] represent dir in xz plane),
where onGroup function is provide by user, giving a chance to set a feature's flag.
index: [];
vx: number - the first vertex index of a feature, 0, 26, ...</pre>
where verts is the total vertices number, verts = features * 26</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_xmath_geom.js.html">lib/xmath/geom.js</a>, <a href="lib_xmath_geom.js.html#line543">line 543</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>part of vertices {pos, uvs, normals, dirs, index}, totally 28 vertices</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".hexatile"><span class="type-signature">(static) </span>hexatile<span class="signature">(r)</span><span class="type-signature"> &rarr; {object}</span></h4>
    

    



<div class="description">
    <p>cell.radius: default 1</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>r</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>circumcircle's radius</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_xmath_geom.js.html">lib/xmath/geom.js</a>, <a href="lib_xmath_geom.js.html#line697">line 697</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>{vert, norm, r, r05, sqrt32}, where<br>
.vert: an array of hexagon vertices<br>
norm: 6 direction's normal<br>
r: the radius<br>
r05: half r<br>
sqrt32:√3/2 * r</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".texPrism3857"><span class="type-signature">(static) </span>texPrism3857<span class="signature">(cell, geoCenter, ctx)</span><span class="type-signature"> &rarr; {object}</span></h4>
    

    



<div class="description">
    <p id='texPrism3857'>Generate a prism by extruding polygon.</p>
This method is also handling virtual boxes if the features is generated
correctly before the polygon been handled.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>cell</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>array of geojson features.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>geoCenter</code></td>
            

            <td class="type">
            
                
<span class="param-type">array</span>


            
            </td>

            

            

            <td class="description last"><p>[x, y] in 3857</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>ctx</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>context of stream data processing<pre>
pos: Float32Array(verts * 3);
loc: Float32Array(verts * 3);
atiles: Float32Array(verts * 2), tiles attribute, number of x,z tiles
uvs: Float32Array(verts * 2);
normals: Float32Array(verts * 3);
box: Float32Array(verts * 3); attribute a_box,
index: [] js 1D array of face vertices index;
vx: number - the first vertex index of a feature. The function update
ctx.vx = ctx.vx + verts before return</pre></p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_xmath_geom.js.html">lib/xmath/geom.js</a>, <a href="lib_xmath_geom.js.html#line723">line 723</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>ctx, part of vertices {pos, uvs, normals, dirs, index}, saved in ctx</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".xof3857"><span class="type-signature">(static) </span>xof3857<span class="signature">(xy, geoScale, geoC0, buf)</span><span class="type-signature"> &rarr; {array}</span></h4>
    

    



<div class="description">
    <p>Get xworld postion of 3857 position.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>xy</code></td>
            

            <td class="type">
            
                
<span class="param-type">array</span>


            
            </td>

            

            

            <td class="description last"><p>[x, y] in EPSG 3857</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>geoScale</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>scale</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>geoC0</code></td>
            

            <td class="type">
            
                
<span class="param-type">array</span>


            
            </td>

            

            

            <td class="description last"><p>c0(x, y)</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>buf</code></td>
            

            <td class="type">
            
                
<span class="param-type">array</span>


            
            </td>

            

            

            <td class="description last"><p>[x * geoScale, 0, -y * geoScale] x-world position</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_xmath_geom.js.html">lib/xmath/geom.js</a>, <a href="lib_xmath_geom.js.html#line908">line 908</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>buf</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">array</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".xzBox"><span class="type-signature">(static) </span>xzBox<span class="signature">(polygon,)</span><span class="type-signature"> &rarr; {object}</span></h4>
    

    



<div class="description">
    <p>Get bounding box of a polygon</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>polygon,</code></td>
            

            <td class="type">
            
                
<span class="param-type">array</span>


            
            </td>

            

            

            <td class="description last"><p>geojson feature's geometry.coordinates, in EPSG 3857</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_xmath_geom.js.html">lib/xmath/geom.js</a>, <a href="lib_xmath_geom.js.html#line887">line 887</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>{xzwh, loc}, where x,z:lower left xy, w,h:width height, loc: center</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    





        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">x-visual API</a></h2><h3>Classes</h3><ul><li><a href="AbsCluster.html">AbsCluster</a></li><li><a href="Affine.html">Affine</a></li><li><a href="AffineCombiner.html">AffineCombiner</a></li><li><a href="AssetKeepr.html">AssetKeepr</a></li><li><a href="Axisys.html">Axisys</a></li><li><a href="BaseComponent.html">BaseComponent</a></li><li><a href="CamCtrl.html">CamCtrl</a></li><li><a href="CanvTex.html">CanvTex</a></li><li><a href="ChannelFilter.html">ChannelFilter</a></li><li><a href="chart.html">chart</a></li><li><a href="chart.Axes.html">Axes</a></li><li><a href="chart.Bar.html">Bar</a></li><li><a href="chart.GridElem.html">GridElem</a></li><li><a href="chart.Pie.html">Pie</a></li><li><a href="chart.Sankey.html">Sankey</a></li><li><a href="CoordsGrid.html">CoordsGrid</a></li><li><a href="D3Pie.html">D3Pie</a></li><li><a href="ECS.html">ECS</a></li><li><a href="Entity.html">Entity</a></li><li><a href="FilmEffect.html">FilmEffect</a></li><li><a href="FinalComposer.html">FinalComposer</a></li><li><a href="gluniform.html">gluniform</a></li><li><a href="GlxError.html">GlxError</a></li><li><a href="GpuPicker.html">GpuPicker</a></li><li><a href="GridVisuals.html">GridVisuals</a></li><li><a href="Htmltex.html">Htmltex</a></li><li><a href="Hud.html">Hud</a></li><li><a href="Input.html">Input</a></li><li><a href="Layers.html">Layers</a></li><li><a href="map3.BoundCubes.html">BoundCubes</a></li><li><a href="Mapctrl.html">Mapctrl</a></li><li><a href="mat4.html">mat4</a></li><li><a href="MorphingAnim.html">MorphingAnim</a></li><li><a href="OSM3.html">OSM3</a></li><li><a href="OsmUtils.html">OsmUtils</a></li><li><a href="PathEffect.html">PathEffect</a></li><li><a href="pickuuid.html">pickuuid</a></li><li><a href="RayPicker.html">RayPicker</a></li><li><a href="rayuuid.html">rayuuid</a></li><li><a href="Request.html">Request</a></li><li><a href="System.html">System</a></li><li><a href="Textag.html">Textag</a></li><li><a href="ThreeExt.html">ThreeExt</a></li><li><a href="ThreeExt.DirTubeBufferGeometry.html">DirTubeBufferGeometry</a></li><li><a href="ThreeExt.DirTubeGeometry.html">DirTubeGeometry</a></li><li><a href="Thrender.html">Thrender</a></li><li><a href="TilesKeeper.html">TilesKeeper</a></li><li><a href="Tween.html">Tween</a></li><li><a href="Vec3.html">Vec3</a></li><li><a href="vec3_.html">vec3</a></li><li><a href="global.html#x">x</a></li><li><a href="XComponent.html">XComponent</a></li><li><a href="XComponent.Canvas.html">Canvas</a></li><li><a href="XComponent.CmdFlag.html">CmdFlag</a></li><li><a href="XComponent.CmpTween.html">CmpTween</a></li><li><a href="XComponent.CmpTweens.html">CmpTweens</a></li><li><a href="XComponent.Dynatex.html">Dynatex</a></li><li><a href="XComponent.Filming.html">Filming</a></li><li><a href="XComponent.FlowingPath.html">FlowingPath</a></li><li><a href="XComponent.Glow.html">Glow</a></li><li><a href="XComponent.GlowingEdge.html">GlowingEdge</a></li><li><a href="XComponent.GpuPickable.html">GpuPickable</a></li><li><a href="XComponent.HudChild.html">HudChild</a></li><li><a href="XComponent.HudGroup.html">HudGroup</a></li><li><a href="XComponent.Input.html">Input</a></li><li><a href="XComponent.ModelSeqs.html">ModelSeqs</a></li><li><a href="XComponent.Obj3.html">Obj3</a></li><li><a href="XComponent.Occluder.html">Occluder</a></li><li><a href="XComponent.RayCastee.html">RayCastee</a></li><li><a href="XComponent.TweenScript.html">TweenScript</a></li><li><a href="XComponent.UserCmd.html">UserCmd</a></li><li><a href="XComponent.UserTween.html">UserTween</a></li><li><a href="XComponent.Visual.html">Visual</a></li><li><a href="XComponent.XCamera.html">XCamera</a></li><li><a href="XError.html">XError</a></li><li><a href="xgeom.html">xgeom</a></li><li><a href="xglsl.html">xglsl</a></li><li><a href="XMaterials.html">XMaterials</a></li><li><a href="xmath.html">xmath</a></li><li><a href="XSankey.html">XSankey</a></li><li><a href="XSys.html">XSys</a></li><li><a href="XTweener.html">XTweener</a></li><li><a href="XTweenException.html">XTweenException</a></li><li><a href="xutils.html">xutils</a></li><li><a href="XWorld.html">XWorld</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AffineTrans">AffineTrans</a></li><li><a href="global.html#AffineType">AffineType</a></li><li><a href="global.html#browserVer">browserVer</a></li><li><a href="global.html#getEffectPass">getEffectPass</a></li><li><a href="global.html#glConfig">glConfig</a></li><li><a href="global.html#glx">glx</a></li><li><a href="global.html#interpret">interpret</a></li><li><a href="global.html#KeyFlag">KeyFlag</a></li><li><a href="global.html#LayerChannel">LayerChannel</a></li><li><a href="global.html#onMouse">onMouse</a></li><li><a href="global.html#R">R</a></li><li><a href="global.html#XEasing">XEasing</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Mon Aug 17 2020
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>